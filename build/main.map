{"version":3,"sources":["webpack:///webpack/bootstrap aec9f9472068d21d4e49","webpack:///external \"express\"","webpack:///external \"multer\"","webpack:///external \"body-parser\"","webpack:///external \"mongoose\"","webpack:///./src/index.js","webpack:///external \"path\"","webpack:///external \"serve-favicon\"","webpack:///external \"passport\"","webpack:///external \"volleyball\"","webpack:///external \"passport-local\"","webpack:///external \"express-session\"","webpack:///external \"connect-flash\"","webpack:///./src/routes/index.js","webpack:///./src/routes/users.js","webpack:///./src/model/user.js"],"names":["app","express","set","use","session","secret","resave","saveUninitialized","cookie","secure","upload","multer","dest","port","mongoose","connect","db","connection","on","console","error","bind","once","log","path","join","__dirname","json","urlencoded","extended","static","flash","passport","initialize","listen","start","routes","Router","get","req","res","render","title","users","uploads","post","newUser","body","file","profileimage","filename","save","err","user","redirect","User","find","params","id","_id","name","Schema","UserSchema","email","type","String","username","index","ouvrage","model"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aec9f9472068d21d4e49","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 3\n// module chunks = 0","import express from \"express\"\r\nimport path from \"path\"\r\nimport favicon from \"serve-favicon\"\r\nimport passport from \"passport\"\r\nimport volleyball from \"volleyball\"\r\nimport {LocalStrategy} from \"passport-local\"\r\nimport multer from \"multer\"\r\nimport session from \"express-session\"\r\nimport bodyParser from \"body-parser\"\r\n// config body-parseur\r\n\r\n//\r\nvar app = express()\r\napp.set('trust proxy', 1) // trust first proxy\r\napp.use(session({\r\n  secret: 'keyboard cat',\r\n  resave: false,\r\n  saveUninitialized: true,\r\n  cookie: { secure: true }\r\n}))\r\n//config multer\r\nconst upload = multer({dest:'./uploads'})\r\n//\r\nimport flash from \"connect-flash\"\r\nimport mongoose from \"mongoose\"\r\nconst port = 4567\r\n//config mongo\r\nmongoose.connect('mongodb://localhost/auth_db');\r\nvar db = mongoose.connection;\r\ndb.on('error', console.error.bind(console, 'connection error:'));\r\ndb.once('open', function() {\r\n  console.log('[MONGODB][server ok] ===> connected!')\r\n});\r\n//\r\nimport {routes} from \"./routes/index\"\r\nimport {users} from \"./routes/users\"\r\n//view engine setup\r\napp.set(\"views\" ,path.join(__dirname,'views'))\r\napp.set('view engine', 'pug')\r\n//\r\napp.use(volleyball)\r\napp.use(express.json())\r\napp.use(express.urlencoded({extended:false}))\r\n// app.use(bodyParser.urlencoded({extended:false}))\r\napp.use(express.static(path.join(__dirname, 'public')))\r\napp.use(flash())\r\n//passport config\r\napp.use(passport.initialize())\r\napp.use(passport.session())\r\n//\r\napp.use('/', routes)\r\napp.use('/users', users)\r\n//\r\napp.listen(port,() =>{\r\n  console.log(`[App running on port : ${port}]`);\r\n})\r\n\r\nconst start =\"server start\"\r\nconsole.log(`${start}`);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"volleyball\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"volleyball\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"connect-flash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-flash\"\n// module id = 12\n// module chunks = 0","import express from \"express\"\r\nconst routes = express.Router()\r\n\r\n//get -home page\r\nroutes.get('/', (req, res) =>{\r\n  res.render(\"index\", {title:\"Accueil\"})\r\n})\r\n\r\nexport { routes }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","import express from \"express\"\r\nconst users = express.Router()\r\nimport { User } from '../model/user'\r\nimport multer from 'multer'\r\nconst uploads = multer({dest:'./uploads'})\r\nimport bodyParser from \"body-parser\"\r\n//\r\n// users.get(\"/\", (req, res) => {\r\n//   res.send(\"ok\")\r\n// })\r\n//\r\nusers.get(\"/register\", (req, res) => {\r\n  res.render(\"register\",{title:\"Writing History\"})\r\n});\r\n\r\nusers.post('/register', (req, res) => {\r\n  const newUser = new User(req.body)\r\n  if (req.file) {\r\n    console.log('uploding img');\r\n    const profileimage = req.file.filename\r\n  }\r\n  else {\r\n    console.log('no img uploaded');\r\n    const profileimage = 'noimage.png'\r\n  }\r\n  newUser.save((err, user) => {\r\n    if (err) {\r\n      // res.send(err)\r\n      res.redirect('/')\r\n      // alert(\"votre requete n'à pas était enregistrer, veuillez ressayer\")\r\n      console.log(err, \"votre requete n'à pas était enregistrer, veuillez ressayer\");\r\n    } else {\r\n      res.redirect('/')\r\n      // res.send(req.body);\r\n      console.log(req.body);\r\n    }\r\n  })\r\n  // req.flash('succcess', 'vous pouvais vous co vous etes dans la BdD')\r\n  //res.redirect('/')\r\n})\r\n\r\nusers.get(\"/login\", (req, res) => {\r\n  res.render(\"login\", {title:\"login\"})\r\n});\r\n\r\nusers.get(\"/\", (req, res) => {\r\n  User.find({}, (err,users)=>{\r\n    if(err) throw error\r\n    res.render(\"membre\",{\r\n      users,\r\n      title:\"Histoires\"\r\n    })\r\n  })\r\n});\r\n\r\nusers.get(\"/:id\", (req, res) => {\r\n  console.log(req.params.id);\r\n  User.find({_id:req.params.id}, (err,user)=>{\r\n    if(err) throw error\r\n    console.log(user[0]);\r\n    console.log(user[0].name);\r\n    user=user[0]\r\n\r\n    res.render(\"histoire\",{\r\n      user,\r\n      title: user.name\r\n    })\r\n  })\r\n});\r\n\r\nexport {users}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users.js","import mongoose from 'mongoose'\r\nconst Schema = mongoose.Schema\r\n\r\nconst UserSchema = new Schema({\r\n  email:{type:String},\r\n  username: {type: String, index: true},\r\n  name:{type:String},\r\n  profileimage:{type:String},\r\n  ouvrage: {type: String},\r\n  type:{type:String}\r\n\r\n})\r\n\r\nconst User = mongoose.model('User', UserSchema)\r\n\r\nexport { User }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/user.js"],"sourceRoot":""}